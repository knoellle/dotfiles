#!/bin/sh

# go to the script location for relative file paths
cd "${0%/*}"

CACHE=~/.cache/netstatus

#
#   $1: name/tag
#   $2: tracking id
#   example: dhlstatus "somewhat descriptive text" 2930344357
#
function dhlstatus
{
    echo $1 $(./dhl $2 '%early_delivery_date%, %status%') >> $CACHE
}

function getip
{
    echo $1 $(ip addr show $1 | grep -Eo 'inet ([0-9./]*)' | grep -Eo '[0-9]{1,3}(\.[0-9]{1,3}){3}')
}

function getallips
{
    for interface in /sys/class/net/* ; do
        echo $(basename $interface): $(getip $(basename $interface))
    done
}

# Create/clear file
> $CACHE

getallips >> $CACHE

cat $CACHE
